

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>[RTL8722CSM] [RTL8722DM] Use Ameba as UDP server &mdash; amebaDocs 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="[RTL8722CSM] [RTL8722DM] Retrieve Universal Time (UTC) By Ameba" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Retrieve%20Universal%20Time%20%28UTC%29%20By%20Ameba.html" />
    <link rel="prev" title="[RTL8722CSM] [RTL8722DM] Use Ameba as server to send Ameba status" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20as%20server%20to%20send%20Ameba%20status.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> amebaDocs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Open Source SDKs:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../source/arduino_index.html">Arduino SDK</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html">AmebaD</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../ambd_mini/source/index.html">AmebaD-mini</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../ambd_mini/source/getting_started/RTL8722DM_mini_Arduino%20SDK_getting%20start.html">Getting Started with RTL8722DM_mini</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ambd_mini/source/download/index.html">Download</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../ambd_mini/source/peripherals_and_examples/index.html">Peripherals &amp; Examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../../ambd_mini/source/peripherals_and_examples/RTL8722DM_MINI_Arduino_SDK_basic_example_table%2015Apr2021.html">Basic Examples</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="Network%20Examples.html">Network Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="Peripheral%20Examples.html">Peripheral Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="Components%20used.html">Components used</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ambd_mini/source/board_hdk/index.html">Board HDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ambd_mini/source/api_documents/index.html">API Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ambd_mini/source/resources/index.html">Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ambd_mini/source/support/index.html">Support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_micropython/source/index.html">Micropython SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_sdk/source/index.html">Standard SDK</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">amebaDocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../source/arduino_index.html">Arduino SDK</a> &raquo;</li>
        
          <li><a href="../index.html">AmebaD</a> &raquo;</li>
        
          <li><a href="index.html">Peripherals &amp; Examples</a> &raquo;</li>
        
          <li><a href="Network%20Examples.html">Network Examples</a> &raquo;</li>
        
      <li>[RTL8722CSM] [RTL8722DM] Use Ameba as UDP server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/ambd_arduino/source/peripherals_and_examples/[RTL8722CSM] [RTL8722DM] Use Ameba as UDP server.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rtl8722csm-rtl8722dm-use-ameba-as-udp-server">
<h1>[RTL8722CSM] [RTL8722DM] Use Ameba as UDP server<a class="headerlink" href="#rtl8722csm-rtl8722dm-use-ameba-as-udp-server" title="Permalink to this headline">¶</a></h1>
<p>Preparation</p>
<ul class="simple">
<li><p>Ameba x 1</p></li>
</ul>
<p>Example</p>
<p>In this example, we connect Ameba to WiFi and use Ameba to be an UDP
server. When Ameba receives a message from UDP client, it replies
“acknowledged” message to client.</p>
<div class="line-block">
<div class="line">Open the WiFi Web Server example. “File” -&gt; “Examples” -&gt; “AmebaWiFi”
-&gt; “WiFiUdpSendReceiveString”</div>
<div class="line"><a class="reference internal" href="../../../_images/image156.png"><img alt="7-1" src="../../../_images/image156.png" style="width: 5.6875in; height: 7.67361in;" /></a></div>
</div>
<p>Modify the highlighted code section (ssid, password, keyindex) to
connect to your WiFi network.</p>
<a class="reference internal image-reference" href="../../../_images/image254.png"><img alt="7-2" src="../../../_images/image254.png" style="width: 5.20833in; height: 6.25in;" /></a>
<p>Compile the code and upload it to Ameba. After pressing the Reset
button, Ameba connects to WiFi and starts the UDP server with port 2390.
After the UDP server starts service, Ameba prints the “Starting
connection to server” message and waits for client connection.</p>
<div class="line-block">
<div class="line"><a class="reference internal" href="../../../_images/image333.png"><img alt="7-4" src="../../../_images/image333.png" style="width: 6.5in; height: 4.10833in;" /></a></div>
<div class="line">As to the UDP client, we use “sokit” program in the computer to
connect to UDP server.</div>
</div>
<p>Choose client mode and fill in the IP of UDP server (which is the IP of
Ameba) and port 2390, then click “UDP Connect”.</p>
<p>After the connection is established, fill in “Hello World” in the Buf 0
field in sokit and click “Send”. Then you can see the Ameba UDP server
replies “acknowledged”.</p>
<a class="reference internal image-reference" href="../../../_images/image430.png"><img alt="7-5" src="../../../_images/image430.png" style="width: 6.5in; height: 4.65139in;" /></a>
<p>Code Reference</p>
<div class="line-block">
<div class="line">Refer to the Arduino tutorial for detailed information about this
example.</div>
<div class="line"><a class="reference external" href="https://www.arduino.cc/en/Tutorial/WiFiSendReceiveUDPString">https://www.arduino.cc/en/Tutorial/WiFiSendReceiveUDPString</a></div>
</div>
<div class="line-block">
<div class="line">First, use begin() to open an UDP port on Ameba.</div>
<div class="line"><a class="reference external" href="https://www.arduino.cc/en/Reference/WiFiUDPBegin">https://www.arduino.cc/en/Reference/WiFiUDPBegin</a></div>
</div>
<div class="line-block">
<div class="line">Use parsePacket() to wait for data from client.</div>
<div class="line"><a class="reference external" href="https://www.arduino.cc/en/Reference/WiFiUDPParsePacket">https://www.arduino.cc/en/Reference/WiFiUDPParsePacket</a></div>
</div>
<div class="line-block">
<div class="line">When a connection is established, use remoteIP() and remotePort() to
get the IP and port of the client.</div>
<div class="line"><a class="reference external" href="https://www.arduino.cc/en/Reference/WiFiUDPRemoteIP">https://www.arduino.cc/en/Reference/WiFiUDPRemoteIP</a></div>
</div>
<div class="line-block">
<div class="line">Then use read() to read the data sent by client.</div>
<div class="line"><a class="reference external" href="https://www.arduino.cc/en/Reference/WiFiUDPRead">https://www.arduino.cc/en/Reference/WiFiUDPRead</a></div>
</div>
<div class="line-block">
<div class="line">To send reply, use beginPacket(), write(), end().</div>
<div class="line"><a class="reference external" href="https://www.arduino.cc/en/Reference/WiFiUDPBeginPacket">https://www.arduino.cc/en/Reference/WiFiUDPBeginPacket</a></div>
<div class="line"><a class="reference external" href="https://www.arduino.cc/en/Reference/WiFiUDPWrite">https://www.arduino.cc/en/Reference/WiFiUDPWrite</a></div>
<div class="line"><a class="reference external" href="https://www.arduino.cc/en/Reference/WiFiUDPEndPacket">https://www.arduino.cc/en/Reference/WiFiUDPEndPacket</a></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Retrieve%20Universal%20Time%20%28UTC%29%20By%20Ameba.html" class="btn btn-neutral float-right" title="[RTL8722CSM] [RTL8722DM] Retrieve Universal Time (UTC) By Ameba" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20as%20server%20to%20send%20Ameba%20status.html" class="btn btn-neutral float-left" title="[RTL8722CSM] [RTL8722DM] Use Ameba as server to send Ameba status" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Ameba IoT.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>